(this["webpackJsonpmy-react-project"]=this["webpackJsonpmy-react-project"]||[]).push([[0],{47:function(e,a,t){},58:function(e,a,t){"use strict";t.r(a);var c=t(3),i=t(36),n=t.n(i),r=t(14),s=t(12),l=t(10),o=(t(47),t(21)),d=t(27),j=d.a.initializeApp({apiKey:"AIzaSyA20IZyEhXb8tavglTimWjgc5TUelxMz5s",authDomain:"prueba-h-b5099.firebaseapp.com",databaseURL:"https://prueba-h-b5099.firebaseio.com",projectId:"prueba-h-b5099",storageBucket:"prueba-h-b5099.appspot.com",messagingSenderId:"480760190009",appId:"1:480760190009:web:71123afad477716c2769e8",measurementId:"G-CP339BM5G5"}).firestore(),u=t(60),m=t(2);var b=function(e){var a,t=d.a.firestore.FieldValue.serverTimestamp,i=Object(c.useState)(""),n=Object(s.a)(i,2),r=n[0],l=n[1],b=Object(c.useState)(""),h=Object(s.a)(b,2),p=h[0],v=h[1],O=Object(c.useState)([]),f=Object(s.a)(O,2),x=(f[0],f[1]),g=e.cover,N=e.setCover,M=e.relatedMoviesArray,y=e.setRelatedMoviesArray,S=j.collection("movies");Object(c.useEffect)((function(){S.onSnapshot((function(e){var a=[];e.forEach((function(e){a.push(e.data())})),x(a)}))}),[]);var A=M.map((function(e){return e.id})),F=M.map((function(e){return Object(m.jsx)("span",{children:"".concat(e.title,", ")})}));return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{className:"form-paragraph",children:"Aqui puedes a\xf1adir cualquier pel\xedcula"}),Object(m.jsx)("small",{children:'Por favor a\xf1ade el t\xedtulo, la descripci\xf3n, sube una imagen de la pel\xedcula y seleccione las pel\xedculas relacionadas de las pel\xedculas almacenadas. Al final pincha el bot\xf3n "A\xf1ade la pel\xedcula".'}),Object(m.jsxs)("form",(a={className:"form",onSubmit:function(e){e.preventDefault()}},Object(o.a)(a,"onSubmit",(function(){return e={id:Object(u.a)(),movieTitle:r,movieDescription:p,cover:g,tag:A,createdAt:t()},S.doc(e.id).set(e).then((function(){alert("La pel\xedcula se guard\xf3")})).catch((function(e){alert(e.message)})),l(""),v(""),N(""),void y([]);var e})),Object(o.a)(a,"children",[Object(m.jsx)("label",{className:"form-label",htmlFor:"movieTitle",children:"T\xedtulo de la pel\xedcula:"}),Object(m.jsx)("input",{className:"form-input",id:"movieTitle",type:"text",placeholder:"T\xedtulo",value:r,onChange:function(e){return l(e.target.value)}}),Object(m.jsx)("label",{className:"form-label",htmlFor:"movieDescription",children:"Descripci\xf3n de la pel\xedcula:"}),Object(m.jsx)("textarea",{className:"form-input",id:"movieDescription",type:"text",placeholder:"Descripci\xf3n",value:p,onChange:function(e){return v(e.target.value)}}),Object(m.jsx)("label",{className:"form-label",htmlFor:"relatedMovies",children:"Pel\xedculas relacionadas:"}),Object(m.jsx)("input",{className:"form-input-hidden",id:"relatedMovies",type:"text",placeholder:"Pel\xedculas relacionadas",value:A,onChange:function(e){return y(e.target.value)}}),Object(m.jsx)("span",{children:F}),Object(m.jsx)("button",{className:"form-button-addMovie",type:"submit",children:"A\xf1ade la pel\xedcula"})]),a))]})};var h=function(){return Object(m.jsx)("div",{children:Object(m.jsx)("p",{className:"landing-paragraph",children:"Puedes a\xf1adir, editar o eliminar pel\xedculas y su informaci\xf3n detallada"})})};var p=function(e){var a=e.searchMovies.map((function(e){return Object(m.jsxs)("li",{className:"container-list-search",children:[Object(m.jsxs)("h3",{className:"container-heading",children:[" ",e.title]}),Object(m.jsx)(r.b,{to:"/movie/".concat(e.id),children:Object(m.jsx)("button",{className:"container-search-button",children:"Para m\xe1s detalles, pulse aqu\xed"})})]},e.id)}));return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault()},children:[Object(m.jsx)("label",{className:"form-label-search",htmlFor:"movieSearch",children:"Busca una pel\xedcula:"}),Object(m.jsx)("input",{className:"form-input",id:"movieSearch",name:"movieName",type:"text",value:e.movieName,placeholder:"Nombre de la pel\xedcula",onChange:function(a){e.handleSearchMovie(a.target.name,a.target.value)}})]}),Object(m.jsx)("ul",{className:"container-search",children:a})]})};var v=function(e){var a=e.dataToShow.map((function(e){return Object(m.jsxs)("li",{id:e.id,className:"container-list",children:[Object(m.jsxs)("h3",{className:"container-heading",children:[" ",e.title]}),Object(m.jsx)("p",{className:"container-paragraph",children:e.description.substring(0,110)+"..."}),Object(m.jsx)("button",{onClick:function(){var a;window.confirm("\xbfSeguro que quieres borrar esta pel\xedcula?")&&(a=e,t.doc(a.id).delete().then((function(){alert("La pel\xedcula fue borrada")})).catch((function(e){alert(e.message)})))},className:"container-delete",children:"Eliminar"}),Object(m.jsx)(r.b,{to:"/updateMovie/".concat(e.id),children:Object(m.jsx)("button",{className:"container-delete",children:"Modificar"})})]},e.id)})),t=j.collection("movies");return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h3",{className:"showMovies-heading",children:"Aqui puedes ver todos los pel\xedcilas a\xf1adidas y editarlos o eliminarlos"}),Object(m.jsx)("p",{className:"form-paragraph",children:'Pincha en el bot\xf3n "Modificar" para seleccionar la pel\xedcula que quieres modificar. El formulario se rellenar\xe1 autom\xe1ticamente.'}),Object(m.jsx)("ul",{className:"container",children:a})]})};var O=function(e){for(var a=[],t=1;t<=Math.ceil(e.totalMovies/e.moviePerPage);t++)a.push(t);var c=a.map((function(a){return Object(m.jsx)("li",{className:"pagination-list",children:Object(m.jsx)("a",{onClick:function(){return e.paginate(a)},href:"!#",className:"pagination-link",children:a})},a)}));return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("ul",{className:"pagination-container",children:c})})};var f=function(e){var a=[],t=(e.movieFound.tag.map((function(t){e.dataToShow.map((function(e){e.id===t&&a.push(e)}));return a})),a.map((function(e){return Object(m.jsxs)("li",{className:"container-list-movieDetails",children:[Object(m.jsx)("img",{src:e.cover,className:"container-image"}),Object(m.jsx)("h3",{children:e.title})]})})));return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("li",{className:"container-moviedetails-list",children:[Object(m.jsx)("img",{src:e.movieFound.cover,className:"container-moviedetails-image"}),Object(m.jsxs)("h3",{className:"container-heading",children:[" ",e.movieFound.title]}),Object(m.jsx)("p",{className:"container-paragraph",children:e.movieFound.description})]},e.movieFound.id),Object(m.jsx)("h3",{children:"Pel\xedculas relacionadas:"}),Object(m.jsx)("ul",{className:"container",children:t}),Object(m.jsx)(r.b,{to:"/",className:"link",children:Object(m.jsx)("h4",{className:"form-link",children:"Volver a la p\xe1gina principal"})})]})},x=t(42);var g=function(e){var a=e.dataToShow.slice(Math.max(e.dataToShow.length-5,1)).map((function(e){return Object(m.jsxs)("li",{className:"container-list",children:[Object(m.jsx)("img",{src:e.cover,className:"container-image"}),Object(m.jsxs)("h3",{className:"container-heading",children:[" ",e.title]})]})}));return Object(m.jsxs)("ul",{className:"container",children:[Object(m.jsx)("h3",{className:"heading",children:"Las 5 \xfaltimas pel\xedculas a\xf1adidas"}),Object(m.jsx)(x.a,{children:a})]})};var N=function(e){var a,t=e.movieFound.id,i=Object(c.useState)(e.movieFound.title),n=Object(s.a)(i,2),r=n[0],l=n[1],d=Object(c.useState)(e.movieFound.description),u=Object(s.a)(d,2),b=u[0],h=u[1],p=e.cover,v=e.setCover,O=e.relatedMoviesArray,f=e.setRelatedMoviesArray,x=j.collection("movies"),g=O.map((function(e){return e.id})),N=O.map((function(e){return Object(m.jsx)("span",{children:"".concat(e.title,", ")})}));return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("form",(a={className:"form",onSubmit:function(e){e.preventDefault()}},Object(o.a)(a,"onSubmit",(function(){return e={movieTitle:r,movieDescription:b,cover:p,tag:g,id:t},x.doc(e.id).update(e).then((function(){alert("La pel\xedcula ha sido cambiada")})).catch((function(e){alert(e.message)})),l(""),h(""),v(""),void f([]);var e})),Object(o.a)(a,"children",[Object(m.jsx)("label",{className:"form-label",htmlFor:"movieTitle",children:"T\xedtulo de la pel\xedcula:"}),Object(m.jsx)("input",{className:"form-input",id:"movieTitle",type:"text",placeholder:"T\xedtulo",value:r,onChange:function(e){return l(e.target.value)}}),Object(m.jsx)("label",{className:"form-label",htmlFor:"movieDescription",children:"Descripci\xf3n de la pel\xedcula:"}),Object(m.jsx)("textarea",{className:"form-input",id:"movieDescription",type:"movieDescription",placeholder:"Descripci\xf3n",value:b,onChange:function(e){return h(e.target.value)}}),Object(m.jsx)("label",{className:"form-label",htmlFor:"relatedMovies",children:"Pel\xedculas relacionadas:"}),Object(m.jsx)("input",{className:"form-input-hidden",id:"relatedMovies",type:"text",placeholder:"Pel\xedculas relacionadas",value:g,onChange:function(e){return f(e.target.value)}}),Object(m.jsx)("span",{children:N}),Object(m.jsx)("button",{className:"form-button-addMovie",type:"submit",children:"Modifica la pel\xedcula"})]),a))})};var M=function(e){var a=Object(c.useState)(""),t=Object(s.a)(a,2),i=t[0],n=t[1],r=e.cover,l=e.setCover;return console.log(r),Object(m.jsx)("div",{children:Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{className:"form-label",htmlFor:"movieImage",children:"Imagen de la pel\xedcula:"}),Object(m.jsx)("input",{className:"form-input-hidden",id:"movieImage",type:"text",placeholder:"Imagen",value:r,onChange:function(e){return l(e.target.value)}}),Object(m.jsx)("input",{type:"file",onChange:function(e){return n(e.target.files[0])}}),Object(m.jsx)("button",{onClick:function(){var e=new FormData;e.append("file",i),e.append("upload_preset","cloudinary-media"),e.append("cloud_name","camilla-bachna"),fetch("  https://api.cloudinary.com/v1_1/camilla-bachna/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){l(e.url)})).catch((function(e){return console.log(e)}))},className:"form-button",children:"Subir imagen"}),Object(m.jsxs)("div",{children:[" ",Object(m.jsx)("img",{className:"form-image",src:r})]})]})})},y=t(34);var S=function(e){var a=Object(c.useState)("false"),t=Object(s.a)(a,2),i=(t[0],t[1]),n=function(a){var t=a.currentTarget.id,c=e.relatedMoviesArray.findIndex((function(e){return e.id===t}));if(-1===c){var n=e.dataToShow.find((function(e){return e.id===t})),r=Object(y.a)(e.relatedMoviesArray);r.push(n),e.setRelatedMoviesArray(r),i(!0)}else{var s=Object(y.a)(e.relatedMoviesArray);s.splice(c,1),e.setRelatedMoviesArray(s),i(!1)}},r=e.dataToShow.map((function(a){var t;return t=function(a){return void 0!==e.relatedMoviesArray.find((function(e){return a.id===e.id}))}(a)?"container-list-clicked":"",Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("li",{id:a.id,className:"container-list ".concat(t),onClick:n,children:[Object(m.jsxs)("h3",{className:"container-heading",children:[" ",a.title]}),Object(m.jsx)("p",{className:"container-paragraph",children:a.description.substring(0,110)+"..."}),Object(m.jsxs)("span",{className:"container-relatedMovies",children:["Pel\xedculas relacionadas: ",a.relatedMovies]})]},a.id)})}));return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{className:"form-paragraph",children:"Por favor haz clic en la pel\xedcula que deseas seleccionar como pel\xedcula relacionada."}),Object(m.jsx)("div",{className:"container-search",children:r})]})};var A=function(){var e=Object(c.useState)(""),a=Object(s.a)(e,2),t=a[0],i=a[1],n=Object(c.useState)([]),o=Object(s.a)(n,2),d=o[0],u=o[1],x=Object(c.useState)(""),y=Object(s.a)(x,2),A=y[0],F=y[1],T=Object(c.useState)([]),w=Object(s.a)(T,2),C=w[0],D=w[1],k=Object(c.useState)(1),P=Object(s.a)(k,2),_=P[0],I=P[1],q=Object(c.useState)(10),E=Object(s.a)(q,1)[0];Object(c.useEffect)((function(){var e=j.collection("movies").orderBy("createdAt").onSnapshot((function(e){var a=[];e.forEach((function(e){a.push({id:e.data().id,title:e.data().movieTitle,description:e.data().movieDescription,cover:e.data().cover,tag:e.data().tag})})),u(a)}));return function(){return e()}}),[]);var R=d.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())})),L=_*E,V=L-E,B=R.slice(V,L);return Object(m.jsxs)("div",{className:"main-container",children:[Object(m.jsxs)("header",{className:"header",children:[Object(m.jsx)("h1",{children:"Pagina para cargar/modificar una pel\xedcula"}),Object(m.jsx)("nav",{className:"navigation",children:Object(m.jsxs)("ul",{className:"navigation__list",children:[Object(m.jsx)("li",{className:"navigation__list--item",children:Object(m.jsx)(r.b,{to:"/addMovie",children:Object(m.jsx)("span",{className:"navigation__list--button",children:"A\xf1adir una pel\xedcula"})})}),Object(m.jsx)("li",{className:"navigation__list--item",children:Object(m.jsx)(r.b,{to:"/",children:Object(m.jsx)("span",{className:"navigation__list--button",children:"Volver a la p\xe1gina principal"})})}),Object(m.jsx)("li",{className:"navigation__list--item",children:Object(m.jsx)(r.b,{to:"/showMovie",children:Object(m.jsx)("span",{className:"navigation__list--button",children:"Editar o eliminar las pel\xedculas"})})})]})})]}),Object(m.jsx)("main",{className:"main",children:Object(m.jsxs)(l.c,{children:[Object(m.jsxs)(l.a,{exact:!0,path:"/",children:[Object(m.jsx)(g,{dataToShow:d}),Object(m.jsxs)("div",{className:"landing",children:[Object(m.jsx)(h,{}),Object(m.jsx)(p,{handleSearchMovie:function(e,a){"movieName"===e&&i(a)},movieName:t,searchMovies:B}),Object(m.jsx)(O,{moviePerPage:E,totalMovies:R.length,paginate:function(e){return I(e)}})]})]}),Object(m.jsx)(l.a,{path:"/movie/:id",render:function(e){var a=e.match.params.id,t=d.find((function(e){return e.id===a}));if(t)return Object(m.jsx)(f,{movieFound:t,cover:A,dataToShow:d})}}),Object(m.jsxs)(l.a,{path:"/addMovie",children:[Object(m.jsx)(b,{dataToShow:d,cover:A,setCover:F,relatedMoviesArray:C,setRelatedMoviesArray:D}),Object(m.jsx)(M,{cover:A,setCover:F}),Object(m.jsx)(S,{dataToShow:d,relatedMoviesArray:C,setRelatedMoviesArray:D}),Object(m.jsx)(r.b,{to:"/",className:"link",children:Object(m.jsx)("h4",{className:"form-link",children:"Volver a la p\xe1gina principal"})})]}),Object(m.jsx)(l.a,{path:"/updateMovie/:id",render:function(e){var a=e.match.params.id,t=d.find((function(e){return e.id===a}));if(t)return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(N,{movieFound:t,cover:A,setCover:F,relatedMoviesArray:C,setRelatedMoviesArray:D}),Object(m.jsx)(M,{cover:A,setCover:F}),Object(m.jsx)(S,{dataToShow:d,relatedMoviesArray:C,setRelatedMoviesArray:D}),Object(m.jsx)(r.b,{to:"/showMovie",className:"link",children:Object(m.jsx)("h4",{className:"form-link",children:"Volver a ver todas las pel\xedculas"})})]})}}),Object(m.jsxs)(l.a,{path:"/showMovie",children:[Object(m.jsx)(v,{dataToShow:d}),Object(m.jsx)(r.b,{to:"/",className:"link",children:Object(m.jsx)("h4",{className:"form-link",children:"Volver a la p\xe1gina principal"})})]})]})}),Object(m.jsx)("footer",{className:"footer",children:Object(m.jsx)("small",{children:"Camilla \xa9 2021"})})]})};n.a.render(Object(m.jsx)(r.a,{children:Object(m.jsx)(A,{})}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.6516b24a.chunk.js.map